webpackJsonp([3],{dDHZ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("vMJZ"),a={name:"basetable",data:function(){return{testdata:[],addVisible:!1,editVisible:!1,Height:0,form:{_id:"",updated_at:"",content:""},total:0,hideSP:!1,multipleSelection:[]}},created:function(){this.getTestData()},mounted:function(){this.Height=window.innerHeight-280},computed:{},methods:{getTestData:function(){var t=this;Object(i.e)().then(function(e){console.log(e),t.testdata=e,t.total=e.length})},handleSelectionChange:function(t){this.multipleSelection=t},handleEdit:function(t,e){this.idx=t;var n=this.testdata[t];this.form={_id:n._id,updated_at:n.updated_at,content:n.content},this.editVisible=!0},saveEdit:function(){var t=this,e=this.form.content,n=this.form._id,a=this;Object(i.d)({_id:n,content:e}).then(function(e){a.editVisible=!1,t.$message({message:"恭喜你，修改成功！",center:!0,type:"success"}),Object(i.e)().then(function(t){a.testdata=t})})},handleDestroy:function(t,e){var n=this;this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.c)({_id:e._id}).then(function(t){console.log(t),Object(i.e)().then(function(t){n.testdata=t,n.$message({type:"success",center:!0,message:"删除成功!"})})})}).catch(function(){n.$message({type:"info",center:!0,message:"已取消删除"})})},haddleAdd:function(){this.form.updated_at="",this.form.content="",this.addVisible=!0},saveAdd:function(){var t=this,e=this.form.content;this.form._id;Object(i.a)({content:e}).then(function(e){t.addVisible=!1,t.$message({message:"恭喜你，添加成功！",center:!0,type:"success"}),Object(i.e)().then(function(e){t.testdata=e})})},delAll:function(){for(var t=this.multipleSelection.length,e="",n=0;n<t;n++)e+=this.multipleSelection[n].content+" ";this.$message({message:"删除了"+e,center:!0,type:"success"}),Object(i.b)(this.multipleSelection).then(function(t){console.log(t)})}}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"handlebox"},[n("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-delete"},on:{click:t.delAll}},[t._v("批量删除")]),t._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.haddleAdd}},[t._v("新增")])],1),t._v(" "),n("el-table",{ref:"multipleTable",attrs:{height:t.Height,data:t.testdata,stripe:""},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"_id",label:"id",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"updated_at",label:"日期",sortable:"",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"content",label:"内容",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(n){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(n){return t.handleDestroy(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{"hide-on-single-page":t.hideSP,"page-size":15,background:"",layout:"prev, pager, next",total:t.total}})],1),t._v(" "),n("el-dialog",{attrs:{title:"新增",visible:t.addVisible,width:"30%"},on:{"update:visible":function(e){t.addVisible=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"50px"}},[n("el-form-item",{attrs:{label:"日期"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.form.updated_at,callback:function(e){t.$set(t.form,"updated_at",e)},expression:"form.updated_at"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"id"}},[n("el-input",{model:{value:t.form._id,callback:function(e){t.$set(t.form,"_id",e)},expression:"form._id"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"内容"}},[n("el-input",{model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.addVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.saveAdd}},[t._v("确 定")])],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"编辑",visible:t.editVisible,width:"30%"},on:{"update:visible":function(e){t.editVisible=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"50px"}},[n("el-form-item",{attrs:{label:"日期"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.form.updated_at,callback:function(e){t.$set(t.form,"updated_at",e)},expression:"form.updated_at"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"id"}},[n("el-input",{model:{value:t.form._id,callback:function(e){t.$set(t.form,"_id",e)},expression:"form._id"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"内容"}},[n("el-input",{model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.editVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.saveEdit}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var o=n("VU/8")(a,l,!1,function(t){n("yF9F")},"data-v-ce4248be",null);e.default=o.exports},yF9F:function(t,e){}});